<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FHIRHub - HL7 to FHIR Conversion Service</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        h1 {
            color: #2c3e50;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }
        h2 {
            color: #2980b9;
        }
        pre {
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 4px;
            overflow-x: auto;
        }
        .api-section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        .method {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 4px;
            font-weight: bold;
            margin-right: 10px;
        }
        .get {
            background-color: #61affe;
            color: white;
        }
        .post {
            background-color: #49cc90;
            color: white;
        }
    </style>
</head>
<body>
    <h1>FHIRHub</h1>
    <p>Welcome to FHIRHub, a service for converting HL7 v2.5 messages to FHIR R4 format.</p>
    
    <h2>Features</h2>
    <ul>
        <li>File monitoring for automatic HL7 to FHIR conversion</li>
        <li>REST API for programmatic conversion</li>
        <li>Conversion history tracking</li>
        <li>FHIR resource viewing</li>
    </ul>
    
    <h2>API Documentation</h2>
    <p>The following endpoints are available:</p>
    
    <div class="api-section">
        <span class="method get">GET</span>
        <strong>/api/conversions</strong>
        <p>Get a paginated list of conversion logs</p>
        <p><em>Parameters:</em> page (default: 0), size (default: 10)</p>
    </div>
    
    <div class="api-section">
        <span class="method get">GET</span>
        <strong>/api/stats</strong>
        <p>Get conversion statistics</p>
    </div>
    
    <div class="api-section">
        <span class="method get">GET</span>
        <strong>/api/conversions/{id}</strong>
        <p>Get a specific conversion by ID</p>
    </div>
    
    <div class="api-section">
        <span class="method get">GET</span>
        <strong>/api/fhir/{filename}</strong>
        <p>Get a specific FHIR resource by filename</p>
    </div>
    
    <div class="api-section">
        <span class="method post">POST</span>
        <strong>/api/convert</strong>
        <p>Convert an HL7 message to FHIR</p>
        <pre>
{
  "hl7": "MSH|^~\\&|...",
  "filename": "optional_filename.hl7"
}
        </pre>
    </div>
    
    <div class="api-section">
        <span class="method post">POST</span>
        <strong>/api/upload</strong>
        <p>Upload an HL7 file for processing (use multipart/form-data)</p>
    </div>
    
    <div class="api-section">
        <span class="method post">POST</span>
        <strong>/api/upload-content</strong>
        <p>Upload HL7 content as text</p>
        <pre>
{
  "fileContent": "MSH|^~\\&|...",
  "filename": "optional_filename.hl7"
}
        </pre>
    </div>
    
    <h2>Authentication</h2>
    <p>All API endpoints require an API key, which can be provided in one of two ways:</p>
    <ul>
        <li>As an HTTP header: <code>X-API-Key: your-api-key</code></li>
        <li>As a query parameter: <code>?apiKey=your-api-key</code></li>
    </ul>
    
    <footer style="margin-top: 50px; text-align: center; color: #7f8c8d; font-size: 0.9em;">
        <p>FHIRHub - HL7 to FHIR Conversion Service</p>
    </footer>
</body>
</html>