<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>API Reference - FHIRHub</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/css/styles.css">
  <link rel="stylesheet" href="/css/sidebar-menu.css">
  <link rel="stylesheet" href="/css/api-reference.css">
  
  <!-- Inclusions du chatbot de support -->
  <link rel="stylesheet" href="/css/support-chatbot.css">
  <script src="/js/support-chatbot.js" defer></script>
  
  <!-- Inclusion du menu latéral -->
  <script src="/js/include-sidebar.js" defer></script>
  <script src="/js/sidebar-menu-new.js" defer></script>
</head>
<body>
  <!-- Contenu du menu latéral chargé par include-sidebar.js -->
  <div id="sidebar-container"></div>

  <!-- Contenu principal -->
  <div class="main-content">
    <div class="container">
      <h1>API Reference - Documentation officielle</h1>
      
      <div class="tabs">
        <button class="tab-btn active" onclick="openTab('overview')">Vue d'ensemble</button>
        <button class="tab-btn" onclick="openTab('endpoints')">Endpoints</button>
        <button class="tab-btn" onclick="openTab('authentication')">Authentification</button>
        <button class="tab-btn" onclick="openTab('usage')">Exemples d'utilisation</button>
      </div>

      <div id="overview" class="tab-content active">
        <h2>Vue d'ensemble de l'API FHIRHub</h2>
        <p>L'API FHIRHub permet l'intégration de notre puissant moteur de conversion HL7 vers FHIR dans vos applications. Notre API RESTful est conçue pour être facile à utiliser, performante et respectueuse des standards.</p>
        
        <div class="api-highlights">
          <div class="highlight-card">
            <div class="highlight-icon"><i class="fas fa-bolt"></i></div>
            <div class="highlight-content">
              <h3>Conversion rapide</h3>
              <p>Convertissez des messages HL7 v2.5 en ressources FHIR R4 en quelques millisecondes</p>
            </div>
          </div>
          
          <div class="highlight-card">
            <div class="highlight-icon"><i class="fas fa-key"></i></div>
            <div class="highlight-content">
              <h3>Authentification sécurisée</h3>
              <p>Sécurité assurée par des clés API et tokens JWT avec contrôle d'accès granulaire</p>
            </div>
          </div>
          
          <div class="highlight-card">
            <div class="highlight-icon"><i class="fas fa-book-medical"></i></div>
            <div class="highlight-content">
              <h3>Terminologies françaises</h3>
              <p>Support intégré des terminologies spécifiques au système de santé français</p>
            </div>
          </div>
        </div>
        
        <h3>URL de base</h3>
        <div class="code-block">
          <code>https://votre-instance-fhirhub.com/api</code>
        </div>
        
        <div class="card getting-started">
          <h3>Démarrage rapide</h3>
          <ol>
            <li>Créez une application dans l'<a href="/applications.html">interface d'administration</a></li>
            <li>Générez une <a href="/api-keys.html">clé API</a> pour cette application</li>
            <li>Utilisez cette clé dans l'en-tête <code>X-API-KEY</code> de vos requêtes</li>
            <li>Effectuez une requête test vers <code>/api/status</code> pour vérifier que tout fonctionne</li>
          </ol>
        </div>
      </div>

      <div id="endpoints" class="tab-content">
        <h2>Endpoints API</h2>
        <p>L'API FHIRHub propose plusieurs endpoints pour répondre à différents besoins d'intégration.</p>
        
        <div class="endpoint-group">
          <h3>Conversion HL7 vers FHIR</h3>
          
          <div class="endpoint">
            <div class="endpoint-header">
              <span class="method post">POST</span>
              <span class="path">/api/convert/hl7-to-fhir</span>
            </div>
            <div class="endpoint-description">
              Convertit un message HL7 en ressource(s) FHIR
            </div>
            <div class="endpoint-details">
              <h4>Paramètres</h4>
              <table class="params-table">
                <thead>
                  <tr>
                    <th>Nom</th>
                    <th>Type</th>
                    <th>Description</th>
                    <th>Requis</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>message</td>
                    <td>string</td>
                    <td>Message HL7 à convertir</td>
                    <td>Oui</td>
                  </tr>
                  <tr>
                    <td>options</td>
                    <td>object</td>
                    <td>Options de conversion (voir documentation détaillée)</td>
                    <td>Non</td>
                  </tr>
                </tbody>
              </table>
              
              <h4>Exemple de requête</h4>
              <div class="code-block">
<pre>POST /api/convert/hl7-to-fhir
X-API-KEY: votre-cle-api

{
  "message": "MSH|^~\\&|SENDING_APP|SENDING_FACILITY|RECEIVING_APP|RECEIVING_FACILITY|20220801131415||ADT^A01^ADT_A01|20220801131415|P|2.5|",
  "options": {
    "includeOriginal": true,
    "validate": true
  }
}</pre>
              </div>
              
              <h4>Exemple de réponse</h4>
              <div class="code-block">
<pre>{
  "success": true,
  "data": {
    "resources": [
      {
        "resourceType": "Patient",
        "id": "example",
        "meta": {
          "lastUpdated": "2022-08-01T13:14:15Z"
        },
        "name": [
          {
            "family": "Smith",
            "given": [
              "John"
            ]
          }
        ],
        "gender": "male",
        "birthDate": "1990-01-01"
      }
    ],
    "original": "MSH|^~\\&|SENDING_APP|SENDING_FACILITY|RECEIVING_APP|RECEIVING_FACILITY|20220801131415||ADT^A01^ADT_A01|20220801131415|P|2.5|"
  }
}</pre>
              </div>
            </div>
          </div>

          <div class="endpoint">
            <div class="endpoint-header">
              <span class="method post">POST</span>
              <span class="path">/api/convert/fhir-to-hl7</span>
            </div>
            <div class="endpoint-description">
              Convertit une ressource FHIR en message HL7
            </div>
          </div>
          
          <div class="endpoint">
            <div class="endpoint-header">
              <span class="method post">POST</span>
              <span class="path">/api/convert/validate</span>
            </div>
            <div class="endpoint-description">
              Valide un message HL7 sans conversion
            </div>
          </div>
          
          <div class="endpoint">
            <div class="endpoint-header">
              <span class="method post">POST</span>
              <span class="path">/api/convert/raw</span>
            </div>
            <div class="endpoint-description">
              Convertit un message HL7 brut (text/plain)
            </div>
          </div>
          
          <div class="endpoint">
            <div class="endpoint-header">
              <span class="method post">POST</span>
              <span class="path">/api/convert/mllp</span>
            </div>
            <div class="endpoint-description">
              Convertit un message HL7 au format MLLP
            </div>
          </div>
        </div>
        
        <div class="endpoint-group">
          <h3>IA et Analyse HL7</h3>
          
          <div class="endpoint">
            <div class="endpoint-header">
              <span class="method post">POST</span>
              <span class="path">/api/hl7-ai/analyze-hl7</span>
            </div>
            <div class="endpoint-description">
              Analyse un message HL7 avec intelligence artificielle
            </div>
          </div>
          
          <div class="endpoint">
            <div class="endpoint-header">
              <span class="method post">POST</span>
              <span class="path">/api/hl7-ai/analyze-fhir</span>
            </div>
            <div class="endpoint-description">
              Analyse une ressource FHIR avec intelligence artificielle
            </div>
          </div>
          
          <div class="endpoint">
            <div class="endpoint-header">
              <span class="method post">POST</span>
              <span class="path">/api/hl7-ai/analyze-conversion</span>
            </div>
            <div class="endpoint-description">
              Analyse la conversion entre HL7 et FHIR
            </div>
          </div>
          
          <div class="endpoint">
            <div class="endpoint-header">
              <span class="method post">POST</span>
              <span class="path">/api/hl7-ai/suggest-mapping</span>
            </div>
            <div class="endpoint-description">
              Suggère un mapping entre HL7 et FHIR
            </div>
          </div>
          
          <div class="endpoint">
            <div class="endpoint-header">
              <span class="method post">POST</span>
              <span class="path">/api/hl7-ai/generate-documentation</span>
            </div>
            <div class="endpoint-description">
              Génère de la documentation pour un message HL7 ou FHIR
            </div>
          </div>
        </div>
        
        <div class="endpoint-group">
          <h3>Chat IA</h3>
          
          <div class="endpoint">
            <div class="endpoint-header">
              <span class="method post">POST</span>
              <span class="path">/api/ai/chat</span>
            </div>
            <div class="endpoint-description">
              Interaction avec le chatbot d'assistance IA
            </div>
          </div>
          
          <div class="endpoint">
            <div class="endpoint-header">
              <span class="method get">GET</span>
              <span class="path">/api/ai/providers/active</span>
            </div>
            <div class="endpoint-description">
              Liste les fournisseurs d'IA actifs
            </div>
          </div>
        </div>
        
        <div class="endpoint-group">
          <h3>Gestion des Fournisseurs d'IA</h3>
          
          <div class="endpoint">
            <div class="endpoint-header">
              <span class="method get">GET</span>
              <span class="path">/api/ai-providers</span>
            </div>
            <div class="endpoint-description">
              Liste tous les fournisseurs d'IA
            </div>
          </div>
          
          <div class="endpoint">
            <div class="endpoint-header">
              <span class="method get">GET</span>
              <span class="path">/api/ai-providers/supported</span>
            </div>
            <div class="endpoint-description">
              Liste les types de fournisseurs d'IA supportés
            </div>
          </div>
          
          <div class="endpoint">
            <div class="endpoint-header">
              <span class="method get">GET</span>
              <span class="path">/api/ai-providers/:id</span>
            </div>
            <div class="endpoint-description">
              Récupère les détails d'un fournisseur d'IA
            </div>
          </div>
          
          <div class="endpoint">
            <div class="endpoint-header">
              <span class="method post">POST</span>
              <span class="path">/api/ai-providers</span>
            </div>
            <div class="endpoint-description">
              Ajoute un nouveau fournisseur d'IA
            </div>
          </div>
          
          <div class="endpoint">
            <div class="endpoint-header">
              <span class="method put">PUT</span>
              <span class="path">/api/ai-providers/:id</span>
            </div>
            <div class="endpoint-description">
              Met à jour un fournisseur d'IA
            </div>
          </div>
          
          <div class="endpoint">
            <div class="endpoint-header">
              <span class="method post">POST</span>
              <span class="path">/api/ai-providers/:id/test</span>
            </div>
            <div class="endpoint-description">
              Teste la connexion à un fournisseur d'IA
            </div>
          </div>
        </div>
        
        <div class="endpoint-group">
          <h3>Terminologies</h3>
          
          <div class="endpoint">
            <div class="endpoint-header">
              <span class="method get">GET</span>
              <span class="path">/api/terminology/french</span>
            </div>
            <div class="endpoint-description">
              Récupère les terminologies françaises
            </div>
          </div>
          
          <div class="endpoint">
            <div class="endpoint-header">
              <span class="method get">GET</span>
              <span class="path">/api/terminology/files</span>
            </div>
            <div class="endpoint-description">
              Liste les fichiers de terminologie disponibles
            </div>
          </div>
          
          <div class="endpoint">
            <div class="endpoint-header">
              <span class="method get">GET</span>
              <span class="path">/api/terminology/files/:filename</span>
            </div>
            <div class="endpoint-description">
              Récupère un fichier de terminologie spécifique
            </div>
          </div>
          
          <div class="endpoint">
            <div class="endpoint-header">
              <span class="method get">GET</span>
              <span class="path">/api/terminology/files/:filename/download</span>
            </div>
            <div class="endpoint-description">
              Télécharge un fichier de terminologie
            </div>
          </div>
          
          <div class="endpoint">
            <div class="endpoint-header">
              <span class="method post">POST</span>
              <span class="path">/api/terminology/import</span>
            </div>
            <div class="endpoint-description">
              Importe un fichier de terminologie
            </div>
          </div>
          
          <div class="endpoint">
            <div class="endpoint-header">
              <span class="method post">POST</span>
              <span class="path">/api/terminology/search</span>
            </div>
            <div class="endpoint-description">
              Recherche dans les terminologies
            </div>
          </div>
          
          <div class="endpoint">
            <div class="endpoint-header">
              <span class="method get">GET</span>
              <span class="path">/api/terminology/systems</span>
            </div>
            <div class="endpoint-description">
              Liste tous les systèmes de terminologie
            </div>
          </div>
        </div>
        
        <div class="endpoint-group">
          <h3>Cache</h3>
          
          <div class="endpoint">
            <div class="endpoint-header">
              <span class="method get">GET</span>
              <span class="path">/api/cache/stats</span>
            </div>
            <div class="endpoint-description">
              Récupère les statistiques du cache
            </div>
          </div>
          
          <div class="endpoint">
            <div class="endpoint-header">
              <span class="method post">POST</span>
              <span class="path">/api/cache/clear</span>
            </div>
            <div class="endpoint-description">
              Vide le cache du système
            </div>
          </div>
        </div>
        
        <div class="endpoint-group">
          <h3>Administration</h3>
          
          <div class="endpoint">
            <div class="endpoint-header">
              <span class="method post">POST</span>
              <span class="path">/api/admin/reset-environment</span>
            </div>
            <div class="endpoint-description">
              Réinitialise l'environnement
            </div>
          </div>
          
          <div class="endpoint">
            <div class="endpoint-header">
              <span class="method get">GET</span>
              <span class="path">/api/admin/system-logs</span>
            </div>
            <div class="endpoint-description">
              Récupère les logs système
            </div>
          </div>
        </div>
        
        <div class="endpoint-group">
          <h3>Authentification</h3>
          
          <div class="endpoint">
            <div class="endpoint-header">
              <span class="method post">POST</span>
              <span class="path">/api/auth/login</span>
            </div>
            <div class="endpoint-description">
              Authentifie un utilisateur
            </div>
          </div>
          
          <div class="endpoint">
            <div class="endpoint-header">
              <span class="method post">POST</span>
              <span class="path">/api/auth/logout</span>
            </div>
            <div class="endpoint-description">
              Déconnexion utilisateur
            </div>
          </div>
          
          <div class="endpoint">
            <div class="endpoint-header">
              <span class="method get">GET</span>
              <span class="path">/api/auth/verify</span>
            </div>
            <div class="endpoint-description">
              Vérifie la validité d'un token JWT
            </div>
          </div>
          
          <div class="endpoint">
            <div class="endpoint-header">
              <span class="method post">POST</span>
              <span class="path">/api/auth/refresh</span>
            </div>
            <div class="endpoint-description">
              Rafraîchit un token JWT
            </div>
          </div>
        </div>
        
        <div class="endpoint-group">
          <h3>Gestion des Applications</h3>
          
          <div class="endpoint">
            <div class="endpoint-header">
              <span class="method get">GET</span>
              <span class="path">/api/applications</span>
            </div>
            <div class="endpoint-description">
              Liste toutes les applications
            </div>
          </div>
          
          <div class="endpoint">
            <div class="endpoint-header">
              <span class="method get">GET</span>
              <span class="path">/api/applications/:id</span>
            </div>
            <div class="endpoint-description">
              Récupère les détails d'une application
            </div>
          </div>
          
          <div class="endpoint">
            <div class="endpoint-header">
              <span class="method post">POST</span>
              <span class="path">/api/applications</span>
            </div>
            <div class="endpoint-description">
              Crée une nouvelle application
            </div>
          </div>
          
          <div class="endpoint">
            <div class="endpoint-header">
              <span class="method put">PUT</span>
              <span class="path">/api/applications/:id</span>
            </div>
            <div class="endpoint-description">
              Met à jour une application
            </div>
          </div>
          
          <div class="endpoint">
            <div class="endpoint-header">
              <span class="method delete">DELETE</span>
              <span class="path">/api/applications/:id</span>
            </div>
            <div class="endpoint-description">
              Supprime une application
            </div>
          </div>
          
          <div class="endpoint">
            <div class="endpoint-header">
              <span class="method get">GET</span>
              <span class="path">/api/applications/:id/history</span>
            </div>
            <div class="endpoint-description">
              Historique d'une application
            </div>
          </div>
        </div>
        
        <div class="endpoint-group">
          <h3>Gestion des Clés API</h3>
          
          <div class="endpoint">
            <div class="endpoint-header">
              <span class="method get">GET</span>
              <span class="path">/api/api-keys</span>
            </div>
            <div class="endpoint-description">
              Liste toutes les clés API
            </div>
          </div>
          
          <div class="endpoint">
            <div class="endpoint-header">
              <span class="method get">GET</span>
              <span class="path">/api/api-keys/:id</span>
            </div>
            <div class="endpoint-description">
              Récupère les détails d'une clé API
            </div>
          </div>
          
          <div class="endpoint">
            <div class="endpoint-header">
              <span class="method post">POST</span>
              <span class="path">/api/api-keys</span>
            </div>
            <div class="endpoint-description">
              Crée une nouvelle clé API
            </div>
          </div>
          
          <div class="endpoint">
            <div class="endpoint-header">
              <span class="method put">PUT</span>
              <span class="path">/api/api-keys/:id</span>
            </div>
            <div class="endpoint-description">
              Met à jour une clé API
            </div>
          </div>
          
          <div class="endpoint">
            <div class="endpoint-header">
              <span class="method delete">DELETE</span>
              <span class="path">/api/api-keys/:id</span>
            </div>
            <div class="endpoint-description">
              Révoque une clé API
            </div>
          </div>
        </div>
        
        <div class="endpoint-group">
          <h3>Utilisateurs</h3>
          
          <div class="endpoint">
            <div class="endpoint-header">
              <span class="method get">GET</span>
              <span class="path">/api/users</span>
            </div>
            <div class="endpoint-description">
              Liste tous les utilisateurs
            </div>
          </div>
          
          <div class="endpoint">
            <div class="endpoint-header">
              <span class="method get">GET</span>
              <span class="path">/api/users/stats</span>
            </div>
            <div class="endpoint-description">
              Récupère les statistiques des utilisateurs
            </div>
          </div>
          
          <div class="endpoint">
            <div class="endpoint-header">
              <span class="method get">GET</span>
              <span class="path">/api/users/:id</span>
            </div>
            <div class="endpoint-description">
              Récupère les détails d'un utilisateur
            </div>
          </div>
          
          <div class="endpoint">
            <div class="endpoint-header">
              <span class="method post">POST</span>
              <span class="path">/api/users</span>
            </div>
            <div class="endpoint-description">
              Crée un nouvel utilisateur
            </div>
          </div>
          
          <div class="endpoint">
            <div class="endpoint-header">
              <span class="method put">PUT</span>
              <span class="path">/api/users/:id</span>
            </div>
            <div class="endpoint-description">
              Met à jour un utilisateur
            </div>
          </div>
          
          <div class="endpoint">
            <div class="endpoint-header">
              <span class="method delete">DELETE</span>
              <span class="path">/api/users/:id</span>
            </div>
            <div class="endpoint-description">
              Supprime un utilisateur
            </div>
          </div>
          
          <div class="endpoint">
            <div class="endpoint-header">
              <span class="method post">POST</span>
              <span class="path">/api/users/:id/change-password</span>
            </div>
            <div class="endpoint-description">
              Change le mot de passe d'un utilisateur
            </div>
          </div>
        </div>
        
        <div class="endpoint-group">
          <h3>Workflows</h3>
          
          <div class="endpoint">
            <div class="endpoint-header">
              <span class="method get">GET</span>
              <span class="path">/api/workflows</span>
            </div>
            <div class="endpoint-description">
              Liste tous les workflows
            </div>
          </div>
          
          <div class="endpoint">
            <div class="endpoint-header">
              <span class="method get">GET</span>
              <span class="path">/api/workflows/application/:id</span>
            </div>
            <div class="endpoint-description">
              Liste les workflows d'une application
            </div>
          </div>
          
          <div class="endpoint">
            <div class="endpoint-header">
              <span class="method get">GET</span>
              <span class="path">/api/workflows/:id</span>
            </div>
            <div class="endpoint-description">
              Récupère les détails d'un workflow
            </div>
          </div>
          
          <div class="endpoint">
            <div class="endpoint-header">
              <span class="method post">POST</span>
              <span class="path">/api/workflows</span>
            </div>
            <div class="endpoint-description">
              Crée un nouveau workflow
            </div>
          </div>
          
          <div class="endpoint">
            <div class="endpoint-header">
              <span class="method put">PUT</span>
              <span class="path">/api/workflows/:id</span>
            </div>
            <div class="endpoint-description">
              Met à jour un workflow
            </div>
          </div>
          
          <div class="endpoint">
            <div class="endpoint-header">
              <span class="method delete">DELETE</span>
              <span class="path">/api/workflows/:id</span>
            </div>
            <div class="endpoint-description">
              Supprime un workflow
            </div>
          </div>
          
          <div class="endpoint">
            <div class="endpoint-header">
              <span class="method post">POST</span>
              <span class="path">/api/workflows/:id/execute</span>
            </div>
            <div class="endpoint-description">
              Exécute un workflow
            </div>
          </div>
          
          <div class="endpoint">
            <div class="endpoint-header">
              <span class="method get">GET</span>
              <span class="path">/api/workflows/:id/logs</span>
            </div>
            <div class="endpoint-description">
              Logs d'exécution d'un workflow
            </div>
          </div>
        </div>
        
        <div class="endpoint-group">
          <h3>Développement</h3>
          
          <div class="endpoint">
            <div class="endpoint-header">
              <span class="method get">GET</span>
              <span class="path">/api/dev/key</span>
            </div>
            <div class="endpoint-description">
              Récupère la clé de développement
            </div>
          </div>
          
          <div class="endpoint">
            <div class="endpoint-header">
              <span class="method get">GET</span>
              <span class="path">/api/dev/generate-temp-key</span>
            </div>
            <div class="endpoint-description">
              Génère une clé temporaire pour les tests
            </div>
          </div>
        </div>
        
        <div class="endpoint-group">
          <h3>Statistiques Système</h3>
          
          <div class="endpoint">
            <div class="endpoint-header">
              <span class="method get">GET</span>
              <span class="path">/api/stats</span>
            </div>
            <div class="endpoint-description">
              Statistiques générales du système
            </div>
          </div>
          
          <div class="endpoint">
            <div class="endpoint-header">
              <span class="method get">GET</span>
              <span class="path">/api/system/version</span>
            </div>
            <div class="endpoint-description">
              Version du système
            </div>
          </div>
          
          <div class="endpoint">
            <div class="endpoint-header">
              <span class="method get">GET</span>
              <span class="path">/api/system/health</span>
            </div>
            <div class="endpoint-description">
              État de santé du système
            </div>
          </div>
          
          <div class="endpoint">
            <div class="endpoint-header">
              <span class="method get">GET</span>
              <span class="path">/api/system/metrics</span>
            </div>
            <div class="endpoint-description">
              Métriques Prometheus du système
            </div>
          </div>
        </div>
        
        <div class="endpoint-group">
          <h3>FHIR Resources REST API</h3>
          
          <div class="endpoint">
            <div class="endpoint-header">
              <span class="method get">GET</span>
              <span class="path">/api/fhir/:resourceType</span>
            </div>
            <div class="endpoint-description">
              Liste des ressources d'un type
            </div>
          </div>
          
          <div class="endpoint">
            <div class="endpoint-header">
              <span class="method get">GET</span>
              <span class="path">/api/fhir/:resourceType/:id</span>
            </div>
            <div class="endpoint-description">
              Récupère une ressource spécifique
            </div>
          </div>
          
          <div class="endpoint">
            <div class="endpoint-header">
              <span class="method post">POST</span>
              <span class="path">/api/fhir/:resourceType</span>
            </div>
            <div class="endpoint-description">
              Crée une nouvelle ressource
            </div>
          </div>
          
          <div class="endpoint">
            <div class="endpoint-header">
              <span class="method put">PUT</span>
              <span class="path">/api/fhir/:resourceType/:id</span>
            </div>
            <div class="endpoint-description">
              Met à jour une ressource
            </div>
          </div>
          
          <div class="endpoint">
            <div class="endpoint-header">
              <span class="method delete">DELETE</span>
              <span class="path">/api/fhir/:resourceType/:id</span>
            </div>
            <div class="endpoint-description">
              Supprime une ressource
            </div>
          </div>
          
          <div class="endpoint">
            <div class="endpoint-header">
              <span class="method get">GET</span>
              <span class="path">/api/fhir/:resourceType/_search</span>
            </div>
            <div class="endpoint-description">
              Recherche dans les ressources
            </div>
          </div>
        </div>
        
        <div class="endpoint-group">
          <h3>Bulk Operations</h3>
          
          <div class="endpoint">
            <div class="endpoint-header">
              <span class="method post">POST</span>
              <span class="path">/api/fhir/$bulk-export</span>
            </div>
            <div class="endpoint-description">
              Export en masse de données FHIR
            </div>
          </div>
          
          <div class="endpoint">
            <div class="endpoint-header">
              <span class="method post">POST</span>
              <span class="path">/api/fhir/$bulk-import</span>
            </div>
            <div class="endpoint-description">
              Import en masse de données FHIR
            </div>
          </div>
          
          <div class="endpoint">
            <div class="endpoint-header">
              <span class="method get">GET</span>
              <span class="path">/api/fhir/$export-status/:jobId</span>
            </div>
            <div class="endpoint-description">
              État d'un job d'export
            </div>
          </div>
        </div>
      </div>

      <div id="authentication" class="tab-content">
        <h2>Authentification</h2>
        <p>FHIRHub API propose deux méthodes d'authentification pour répondre à différents besoins d'intégration.</p>
        
        <div class="auth-methods">
          <div class="auth-method">
            <h3>API Key</h3>
            <p>Méthode d'authentification principale pour les intégrations système-à-système.</p>
            
            <h4>Comment utiliser</h4>
            <ol>
              <li>Créez une application dans l'<a href="/applications.html">interface d'administration</a></li>
              <li>Générez une <a href="/api-keys.html">clé API</a> pour cette application</li>
              <li>Ajoutez l'en-tête <code>X-API-KEY</code> à chaque requête API</li>
            </ol>
            
            <div class="code-example">
              <h4>Exemple de requête avec API Key</h4>
              <div class="code-block">
<pre>curl -X POST https://votre-instance.fhirhub.com/api/convert \
  -H "Content-Type: application/json" \
  -H "X-API-KEY: votre-cle-api" \
  -d '{"message": "MSH|^~\\&|..."}'</pre>
              </div>
            </div>
            
            <div class="info-box">
              <div class="info-icon"><i class="fas fa-info-circle"></i></div>
              <div class="info-content">
                <p>Les clés API sont liées à des applications spécifiques et peuvent être révoquées individuellement. Elles peuvent également avoir des limites d'usage et des dates d'expiration.</p>
              </div>
            </div>
          </div>
          
          <div class="auth-method">
            <h3>JWT (JSON Web Token)</h3>
            <p>Pour les applications Web et les intégrations nécessitant une authentification utilisateur.</p>
            
            <h4>Comment utiliser</h4>
            <ol>
              <li>Authentifiez-vous avec votre nom d'utilisateur et mot de passe via <code>/api/login</code></li>
              <li>Récupérez le token JWT de la réponse</li>
              <li>Ajoutez l'en-tête <code>Authorization: Bearer {token}</code> à chaque requête API</li>
            </ol>
            
            <div class="code-example">
              <h4>Obtention d'un token JWT</h4>
              <div class="code-block">
<pre>curl -X POST https://votre-instance.fhirhub.com/api/login \
  -H "Content-Type: application/json" \
  -d '{"username": "votre-utilisateur", "password": "votre-mot-de-passe"}'

// Réponse
{
  "success": true,
  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
}</pre>
              </div>
              
              <h4>Utilisation du token JWT</h4>
              <div class="code-block">
<pre>curl -X POST https://votre-instance.fhirhub.com/api/convert \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..." \
  -d '{"message": "MSH|^~\\&|..."}'</pre>
              </div>
            </div>
            
            <div class="warning-box">
              <div class="warning-icon"><i class="fas fa-exclamation-triangle"></i></div>
              <div class="warning-content">
                <p>Les tokens JWT expirent après 24 heures par défaut. Assurez-vous de rafraîchir votre token avant expiration.</p>
              </div>
            </div>
          </div>
        </div>
        
        <h3>Gestion des accès</h3>
        <p>Les permissions sont gérées au niveau de l'application et des utilisateurs. Assurez-vous que votre clé API ou votre utilisateur dispose des droits nécessaires pour accéder aux endpoints que vous souhaitez utiliser.</p>
      </div>

      <div id="usage" class="tab-content">
        <h2>Exemples d'utilisation</h2>
        <p>Découvrez comment intégrer l'API FHIRHub dans différents langages et frameworks.</p>
        
        <div class="language-tabs">
          <button class="lang-tab active" onclick="showLanguage('curl')">cURL</button>
          <button class="lang-tab" onclick="showLanguage('javascript')">JavaScript</button>
          <button class="lang-tab" onclick="showLanguage('python')">Python</button>
          <button class="lang-tab" onclick="showLanguage('java')">Java</button>
          <button class="lang-tab" onclick="showLanguage('csharp')">C#</button>
        </div>
        
        <div id="curl" class="language-content active">
          <h3>Exemple cURL</h3>
          <div class="code-block">
<pre>curl -X POST https://votre-instance.fhirhub.com/api/convert \
  -H "Content-Type: application/json" \
  -H "X-API-KEY: votre-cle-api" \
  -d '{
    "message": "MSH|^~\\&|SENDING_APP|SENDING_FACILITY|RECEIVING_APP|RECEIVING_FACILITY|20220801131415||ADT^A01^ADT_A01|20220801131415|P|2.5|\\nPID|1||12345^^^HOSPITAL^MRN||DOE^JOHN^^^^||19800101|M|||123 MAIN ST^^ANYTOWN^NY^12345||(555)555-5555|||S||12345^^^HOSPITAL^AN|999-99-9999|||N|||||N",
    "options": {
      "includeOriginal": true
    }
  }'</pre>
          </div>
        </div>
        
        <div id="javascript" class="language-content">
          <h3>Exemple JavaScript (Node.js)</h3>
          <div class="code-block">
<pre>const axios = require('axios');

const apiKey = 'votre-cle-api';
const hl7Message = 'MSH|^~\\&|SENDING_APP|SENDING_FACILITY|RECEIVING_APP|RECEIVING_FACILITY|20220801131415||ADT^A01^ADT_A01|20220801131415|P|2.5|\\nPID|1||12345^^^HOSPITAL^MRN||DOE^JOHN^^^^||19800101|M|||123 MAIN ST^^ANYTOWN^NY^12345||(555)555-5555|||S||12345^^^HOSPITAL^AN|999-99-9999|||N|||||N';

async function convertHL7ToFHIR() {
  try {
    const response = await axios.post('https://votre-instance.fhirhub.com/api/convert', {
      message: hl7Message,
      options: {
        includeOriginal: true
      }
    }, {
      headers: {
        'Content-Type': 'application/json',
        'X-API-KEY': apiKey
      }
    });
    
    console.log('Ressources FHIR:', response.data.data.resources);
  } catch (error) {
    console.error('Erreur:', error.response ? error.response.data : error.message);
  }
}

convertHL7ToFHIR();</pre>
          </div>
          
          <h3>Exemple JavaScript (Browser)</h3>
          <div class="code-block">
<pre>async function convertHL7ToFHIR() {
  const apiKey = 'votre-cle-api';
  const hl7Message = 'MSH|^~\\&|SENDING_APP|SENDING_FACILITY|RECEIVING_APP|RECEIVING_FACILITY|20220801131415||ADT^A01^ADT_A01|20220801131415|P|2.5|\\nPID|1||12345^^^HOSPITAL^MRN||DOE^JOHN^^^^||19800101|M|||123 MAIN ST^^ANYTOWN^NY^12345||(555)555-5555|||S||12345^^^HOSPITAL^AN|999-99-9999|||N|||||N';

  try {
    const response = await fetch('https://votre-instance.fhirhub.com/api/convert', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'X-API-KEY': apiKey
      },
      body: JSON.stringify({
        message: hl7Message,
        options: {
          includeOriginal: true
        }
      })
    });
    
    const data = await response.json();
    console.log('Ressources FHIR:', data.data.resources);
  } catch (error) {
    console.error('Erreur:', error);
  }
}</pre>
          </div>
        </div>
        
        <div id="python" class="language-content">
          <h3>Exemple Python</h3>
          <div class="code-block">
<pre>import requests
import json

api_key = 'votre-cle-api'
hl7_message = 'MSH|^~\\&|SENDING_APP|SENDING_FACILITY|RECEIVING_APP|RECEIVING_FACILITY|20220801131415||ADT^A01^ADT_A01|20220801131415|P|2.5|\\nPID|1||12345^^^HOSPITAL^MRN||DOE^JOHN^^^^||19800101|M|||123 MAIN ST^^ANYTOWN^NY^12345||(555)555-5555|||S||12345^^^HOSPITAL^AN|999-99-9999|||N|||||N'

url = 'https://votre-instance.fhirhub.com/api/convert'

headers = {
    'Content-Type': 'application/json',
    'X-API-KEY': api_key
}

payload = {
    'message': hl7_message,
    'options': {
        'includeOriginal': True
    }
}

try:
    response = requests.post(url, headers=headers, data=json.dumps(payload))
    response.raise_for_status()
    
    result = response.json()
    print('Ressources FHIR:')
    print(json.dumps(result['data']['resources'], indent=2))
except requests.exceptions.RequestException as e:
    print(f'Erreur: {e}')</pre>
          </div>
        </div>
        
        <div id="java" class="language-content">
          <h3>Exemple Java</h3>
          <div class="code-block">
<pre>import java.net.URI;
import java.net.http.HttpClient;
import java.net.http.HttpRequest;
import java.net.http.HttpResponse;
import org.json.JSONObject;

public class FHIRHubApiExample {
    public static void main(String[] args) {
        String apiKey = "votre-cle-api";
        String hl7Message = "MSH|^~\\&|SENDING_APP|SENDING_FACILITY|RECEIVING_APP|RECEIVING_FACILITY|20220801131415||ADT^A01^ADT_A01|20220801131415|P|2.5|\\nPID|1||12345^^^HOSPITAL^MRN||DOE^JOHN^^^^||19800101|M|||123 MAIN ST^^ANYTOWN^NY^12345||(555)555-5555|||S||12345^^^HOSPITAL^AN|999-99-9999|||N|||||N";
        
        try {
            // Créer le client HTTP
            HttpClient client = HttpClient.newHttpClient();
            
            // Préparer la charge utile JSON
            JSONObject options = new JSONObject();
            options.put("includeOriginal", true);
            
            JSONObject payload = new JSONObject();
            payload.put("message", hl7Message);
            payload.put("options", options);
            
            // Créer la requête HTTP
            HttpRequest request = HttpRequest.newBuilder()
                .uri(URI.create("https://votre-instance.fhirhub.com/api/convert"))
                .header("Content-Type", "application/json")
                .header("X-API-KEY", apiKey)
                .POST(HttpRequest.BodyPublishers.ofString(payload.toString()))
                .build();
            
            // Envoyer la requête et obtenir la réponse
            HttpResponse<String> response = client.send(request, HttpResponse.BodyHandlers.ofString());
            
            // Traiter la réponse
            JSONObject result = new JSONObject(response.body());
            System.out.println("Ressources FHIR:");
            System.out.println(result.getJSONObject("data").getJSONArray("resources").toString(2));
        } catch (Exception e) {
            System.err.println("Erreur: " + e.getMessage());
            e.printStackTrace();
        }
    }
}</pre>
          </div>
        </div>
        
        <div id="csharp" class="language-content">
          <h3>Exemple C#</h3>
          <div class="code-block">
<pre>using System;
using System.Net.Http;
using System.Text;
using System.Threading.Tasks;
using Newtonsoft.Json;

class Program
{
    static async Task Main(string[] args)
    {
        string apiKey = "votre-cle-api";
        string hl7Message = "MSH|^~\\&|SENDING_APP|SENDING_FACILITY|RECEIVING_APP|RECEIVING_FACILITY|20220801131415||ADT^A01^ADT_A01|20220801131415|P|2.5|\\nPID|1||12345^^^HOSPITAL^MRN||DOE^JOHN^^^^||19800101|M|||123 MAIN ST^^ANYTOWN^NY^12345||(555)555-5555|||S||12345^^^HOSPITAL^AN|999-99-9999|||N|||||N";
        
        try
        {
            using (HttpClient client = new HttpClient())
            {
                // Ajouter les en-têtes
                client.DefaultRequestHeaders.Add("X-API-KEY", apiKey);
                
                // Préparer la charge utile
                var payload = new
                {
                    message = hl7Message,
                    options = new
                    {
                        includeOriginal = true
                    }
                };
                
                string jsonPayload = JsonConvert.SerializeObject(payload);
                HttpContent content = new StringContent(jsonPayload, Encoding.UTF8, "application/json");
                
                // Envoyer la requête
                HttpResponseMessage response = await client.PostAsync("https://votre-instance.fhirhub.com/api/convert", content);
                response.EnsureSuccessStatusCode();
                
                string responseBody = await response.Content.ReadAsStringAsync();
                dynamic result = JsonConvert.DeserializeObject(responseBody);
                
                Console.WriteLine("Ressources FHIR:");
                Console.WriteLine(JsonConvert.SerializeObject(result.data.resources, Formatting.Indented));
            }
        }
        catch (Exception e)
        {
            Console.WriteLine($"Erreur: {e.Message}");
        }
    }
}</pre>
          </div>
        </div>
        
        <div class="tips-section">
          <h3>Bonnes pratiques</h3>
          <ul class="tips-list">
            <li>
              <div class="tip-icon"><i class="fas fa-shield-alt"></i></div>
              <div class="tip-content">
                <h4>Sécurité</h4>
                <p>Ne partagez jamais vos clés API. Utilisez des clés différentes pour les environnements de développement et de production.</p>
              </div>
            </li>
            <li>
              <div class="tip-icon"><i class="fas fa-tachometer-alt"></i></div>
              <div class="tip-content">
                <h4>Performance</h4>
                <p>Pour des traitements en masse, utilisez l'endpoint <code>/api/convert/batch</code> plutôt que d'effectuer des appels individuels.</p>
              </div>
            </li>
            <li>
              <div class="tip-icon"><i class="fas fa-sync"></i></div>
              <div class="tip-content">
                <h4>Gestion des erreurs</h4>
                <p>Implémentez une logique de retry avec backoff exponentiel pour gérer les erreurs temporaires.</p>
              </div>
            </li>
          </ul>
        </div>
      </div>


    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Vérifier l'authentification
      const token = localStorage.getItem('token');
      if (!token) {
        window.location.href = '/login.html';
        return;
      }
    });
    
    function openTab(tabName) {
      // Cacher tous les contenus d'onglets
      const tabContents = document.getElementsByClassName("tab-content");
      for (let i = 0; i < tabContents.length; i++) {
        tabContents[i].classList.remove("active");
      }
      
      // Désactiver tous les boutons d'onglet
      const tabButtons = document.getElementsByClassName("tab-btn");
      for (let i = 0; i < tabButtons.length; i++) {
        tabButtons[i].classList.remove("active");
      }
      
      // Afficher le contenu de l'onglet sélectionné
      document.getElementById(tabName).classList.add("active");
      
      // Activer le bouton d'onglet sélectionné
      event.currentTarget.classList.add("active");
    }
    
    function showLanguage(language) {
      // Cacher tous les contenus de langage
      const langContents = document.getElementsByClassName("language-content");
      for (let i = 0; i < langContents.length; i++) {
        langContents[i].classList.remove("active");
      }
      
      // Désactiver tous les boutons de langage
      const langButtons = document.getElementsByClassName("lang-tab");
      for (let i = 0; i < langButtons.length; i++) {
        langButtons[i].classList.remove("active");
      }
      
      // Afficher le contenu du langage sélectionné
      document.getElementById(language).classList.add("active");
      
      // Activer le bouton du langage sélectionné
      event.currentTarget.classList.add("active");
    }
  </script>
</body>
</html>